<!DOCTYPE html>
<html>

<head>
    <title>Marcador simple - Ejemplo del API JavaScript de Google Maps v3</title>
    <style type="text/css">
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        
        #map_frame {
            height: 100%;
        }
    </style>
    <script async defer src="https://maps.googleapis.com/maps/api/js?callback=initMap&key=AIzaSyBJk4qXfMZFy8eN2zg1ycwX7FxZAGXtKs0&libraries=places">
    </script>
    <script type="text/javascript">
        var map;
        var markerSelected;

        function initMap() {
            var oviedo_eii = new google.maps.LatLng(43.357536, -5.848265);
            var misOpciones = {
                center: oviedo_eii,
                zoom: 14,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                disableDefaultUI: true
            };
            map = new google.maps.Map(document.getElementById("map_frame"), misOpciones);

            var marcador = new google.maps.Marker({
                position: oviedo_eii,
                title: "Hola a todos",
                map: map
            });

            marcador.addListener('click', function() {
                markerSelected = marcador;
                var request = {
                    location: markerSelected.position,
                    radius: '5',
                    type: ['restaurant']
                };

                service = new google.maps.places.PlacesService(map);
                service.nearbySearch(request, callback);
            });
        }

        function callback(results, status) {
            if (status == google.maps.places.PlacesServiceStatus.OK) {
                for (var i = 0; i < results.length; i++) {
                    var place = results[i];

                    console.log(place);
                    new google.maps.InfoWindow({
                        content: `<div id="content"><div id="siteNotice"></div>
								<h2 id="firstHeading" class="firstHeading">${place.name} (${place.rating})</h2>
								<div id="bodyContent">
									<p>${place.vicinity}</p>
								</div></div>`
                    }).open(map, markerSelected);
                    //createMarker(results[i]);
                }
            }
        }
    </script>
</head>

<body>
    <div id="map_frame"></div>
</body>

</html>